<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cikkszám kereső</title>

<style>
body {
font-family: Arial, Helvetica, sans-serif;
margin: 0;
padding: 15px;
background: #f7f7f7;
}
h2 {
margin-top: 0;
}
input {
width: 100%;
font-size: 20px;
padding: 10px;
box-sizing: border-box;
}
.card {
background: white;
margin-top: 12px;
padding: 12px;
border-radius: 6px;
box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}
.label {
font-weight: bold;
}
.small {
color: #555;
}
</style>
</head>

<body>

<h2>Cikkszám kereső</h2>

<input
id="keres"
type="text"
placeholder="Írd be a cikkszámot"
/>

<div id="eredmeny"></div>

<script>
let bank = [];
let ultetes = [];

/* CSV-k betöltése */
Promise.all([
fetch('bank.csv').then(r => r.text()),
fetch('ultetes.csv').then(r => r.text())
]).then(([bankText, ultetesText]) => {

// Bank CSV feldolgozása
bank = bankText.split('\n')
.map(s => s.trim().replace(/"/g,''))
.filter(s => s)
.slice(1)
.map(s => s.split(';').map(e => e.trim()));

// Ultetés CSV feldolgozása
ultetes = ultetesText.split('\n')
.map(s => s.trim().replace(/"/g,''))
.filter(s => s)
.slice(1)
.map(s => s.split(';').map(e => e.trim()));

// Kereső engedélyezése
document.getElementById('keres').addEventListener('input', keres);
});

function keres() {
let keresett = this.value.trim().toLowerCase(); // kisbetűsítve a kereséshez
let html = '';

if (keresett.length === 0) {
document.getElementById('eredmeny').innerHTML = '';
return;
}

// BANK ADATOK minden előfordulás (cikkszám a 3. oszlop = r[2])
let b = bank.filter(r => r[2] && r[2].toLowerCase().includes(keresett));
if (b.length > 0) {
html += `<div class="card"><strong>Bank adatok:</strong></div>`;
b.forEach(r => {
html += `
<div class="card">
<div><span class="label">Cikkszám:</span> ${r[2]}</div>
<div><span class="label">Gép:</span> ${r[0]}</div>
<div><span class="label">Pozíció:</span> ${r[1]}</div>
<div><span class="label">Model:</span> ${r[3]}</div>
</div>
`;
});
}

// ÜLTETÉS ADATOK minden előfordulás
let u = ultetes.filter(r => r[0] && r[0].toLowerCase().includes(keresett));
if (u.length > 0) {
html += `<div class="card"><strong>Ültetés adatok:</strong></div>`;
u.forEach(r => {
html += `
<div class="card">
<div><span class="label">Alkatrész info:</span> ${r[1]}</div>
<div><span class="label">Oldal:</span> ${r[3]}</div>
<div><span class="label">Modell:</span> ${r[4]}</div>
<div><span class="label">Beültetés db:</span> ${r[5]}</div>
</div>
`;
});
}

// Nincs találat
if (b.length === 0 && u.length === 0) {
html += `<div class="card">Nincs találat</div>`;
}

document.getElementById('eredmeny').innerHTML = html;
}
</script>

</body>
</html>
